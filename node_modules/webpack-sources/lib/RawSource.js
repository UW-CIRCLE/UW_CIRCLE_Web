/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";

<<<<<<< HEAD
const Source = require("./Source");
const { SourceNode } = require("source-map");
const { SourceListMap } = require("source-list-map");
=======
var Source = require("./Source");
var SourceNode = require("source-map").SourceNode;
var SourceListMap = require("source-list-map").SourceListMap;
>>>>>>> main

class RawSource extends Source {
	constructor(value) {
		super();
<<<<<<< HEAD
		const isBuffer = Buffer.isBuffer(value);
		if (!isBuffer && typeof value !== "string") {
			throw new TypeError("argument 'value' must be either string of Buffer");
		}
		this._valueIsBuffer = !convertToString && isBuffer;
		this._value = convertToString && isBuffer ? undefined : value;
		this._valueAsBuffer = isBuffer ? value : undefined;
	}

	isBuffer() {
		return this._valueIsBuffer;
=======
		this._value = value;
>>>>>>> main
	}

	source() {
		return this._value;
	}

	map(options) {
		return null;
	}

	node(options) {
<<<<<<< HEAD
		if (this._value === undefined) {
			this._value = this._valueAsBuffer.toString("utf-8");
		}
=======
>>>>>>> main
		return new SourceNode(null, null, null, this._value);
	}

	listMap(options) {
<<<<<<< HEAD
		if (this._value === undefined) {
			this._value = this._valueAsBuffer.toString("utf-8");
		}
=======
>>>>>>> main
		return new SourceListMap(this._value);
	}

	updateHash(hash) {
		hash.update(this._value);
	}
}

module.exports = RawSource;
